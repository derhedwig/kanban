{% extends 'base.html' %}

{% block content %}
<a href="/" class="inline-flex group space-x-1 items-center mb-6 text-sm text-gray-500 hover:text-gray-700">
  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 group-hover:text-gray-500" fill="none"
    viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
    <path stroke-linecap="round" stroke-linejoin="round" d="M11 17l-5-5m0 0l5-5m-5 5h12" />
  </svg>
  <span>alle Bretter</span>
</a>

{% include "boards/_board.html" %}

{% endblock %}


{% block javascript %}
{{ block.super }}

<script>
  htmx.onLoad(function (content) {
    content.querySelectorAll(".sortable-tasks").forEach(function (sortable) {
      new Sortable(sortable, {
        animation: 150,
        group: "tasks",
        ghostClass: "border"
      })
    })

    content.querySelectorAll(".sortable-lists").forEach(function (sortable) {
      new Sortable(sortable, {
        animation: 150,
        group: "lists",
        handle: ".list-handle",
      })
    })
  })

  document.addEventListener("end", function (event) {
    if (event.item.classList.contains("task")) {
      let newListId = event.to.parentElement.querySelector("[name='lists']").value
      event.item.querySelector("[type='hidden']").setAttribute("name", newListId)
    }
    moveForm.dispatchEvent(new Event("moved"))
  })

</script>
{% endblock %}